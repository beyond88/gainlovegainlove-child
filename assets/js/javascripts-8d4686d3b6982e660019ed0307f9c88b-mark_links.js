window.MarkLinks={markers:[],addMarker(marker){this.markers.push(marker);},markLinks(){if(this.markers.length===0){return;}
try{const links=document.getElementsByTagName('a');for(let i=0;i<links.length;i++){let href=links[i].href;if(!href){continue;}
if(href.startsWith('/')){href=window.location.origin+href;}
const url=new URL(href);if(url.host===window.location.host){const link=links[i];const params=this.markers.flatMap((marker)=>{if(marker.hasOwnProperty('mark')){return marker.mark(link.href);}else{return[];}});link.href=this._buildHref(link.href,params);}}}catch(e){console.error(`[MarkLinks] Invalid link href: ${e.message}`);}},_buildHref(href,params){const url=new URL(href);const anchors=href.match(/(#.+)/g);const urlPath=url.origin+url.pathname;const urlWithParams=`?${url.search?(url.search.replace('?','')+'&'):''}`+params.join('&');const urlAnchor=anchors?anchors[0]:'';const newUrl=new URL(urlPath+urlWithParams+urlAnchor);return newUrl.href;}};window.UtmLinksMarker={utmMedium:"",utmSource:"",utmTerm:"",utmId:"",utmCampaign:"",utmContent:"",mark(href){try{const url=new URL(href);const urlParams=new URLSearchParams(url.search);const params=[];if(this.utmMedium&&!urlParams.has("utm_medium")){params.push(`utm_medium=${this.utmMedium}`);}
if(this.utmSource&&!urlParams.has("utm_source")){params.push(`utm_source=${this.utmSource}`);}
if(this.utmTerm&&!urlParams.has("utm_term")){params.push(`utm_term=${this.utmTerm}`);}
if(this.utmId&&!urlParams.has("utm_id")){params.push(`utm_id=${this.utmId}`);}
if(this.utmCampaign&&!urlParams.has("utm_campaign")){params.push(`utm_campaign=${this.utmCampaign}`);}
if(this.utmContent&&!urlParams.has("utm_content")){params.push(`utm_content=${this.utmContent}`);}
return params}catch(e){console.error(e.message);return[];}}};window.ShortenUrlLinksMarker={shortenKey:"",shortenQueryKey:"",mark(href){try{const url=new URL(href);const urlParams=new URLSearchParams(url.search);const params=[];if(this.shortenKey&&!urlParams.has(this.shortenQueryKey)){params.push(`${this.shortenQueryKey}=${this.shortenKey}`);}
return params;}catch(e){console.error(e.message);return[];}}}